# Steps/Frame の考え方整理

## 今までの捉え方
（高速で動作させるために）1/60秒の間に何回ステートメントを実行させるか

## 現状のワーカーの駆動方法
ワーカーごとにsteps/frameの回数ぶんステートメントを実行
終わったら次のワーカーを処理（ループ）

## 現状の駆動方法の問題点

マルチワーカーというコンセプトは、
グリッドというひとつの場を
多数のワーカーがそれぞれのロジックで参照・更新することで
相互作用を行わせて楽しむ砂場遊びを提供することにある。

しかし今のweb版の実装は1つのワーカーごとにステップを進めるバッチ方式で
リアルタイムに相互作用を行うことができない。


## 本来の数字の意味
1フレーム表示されるまでにどのくらいステートメントを実行できるか

## 正しいワーカーの駆動方法

1frameごとに以下の手順を実行する
* steps/frameの回数ぶん以下のループ
    * すべてのワーカーに対して以下の手順を繰り返す
        * ワーカーの実行状態を見る
        * もし「停止中」ならなにもしない
        * もし「次フレームまで待機」ならなにもしない
        * もし通常実行なら1ステートメント実行

## 正しい駆動のために必要な機能

1. WorkerScriptに「次のフレームまで待機する」という命令の追加が必要
2. インタプリタに「次フレームまで待機」という状態の追加が必要


### 文法案
```
  #=`
```

### 意味論
WorkerScriptの文法には「プログラムの実行制御を変えるステートメントはすべて`#`への代入文」
というルールがある。

実行を待機するという意味で`#`への代入を使う。
代入する値にgridDataの記号`` ` ``を使うことで、「今回のフレームでの描画プロセスを終了した」という意味を表す。
