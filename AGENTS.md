# AIエージェント向けガイドライン

このファイルは、このプロジェクトで作業するAIエージェント（Gemini AIなど）が従うべき基本的なガイドラインを定めます。

## 1. 言語

*   **チャットの会話:** ユーザーとのすべてのチャットの会話は日本語で行うこと。
*   **コミットメッセージ:** すべてのコミットメッセージは日本語で記述すること。

## 2. 指示と作業

* 指示された作業のみを行う
* 指示の解釈があいまいな場合勝手に判断せずユーザーに質問する
    * 例 「mainブランチをリベースしてください」  
        →「mainブランチとはローカルmainでしょうか、origin mainでしょうか？」
* 指示に含まれていない操作（特にリモートへの変更）は勝手に行わない
* 追加の作業が必要と思われる場合は、実行前に確認を求める
* 危険な操作の前に警告する
    * 以下のような操作の前には必ず確認を求める
        1. git update-ref (ブランチポインタの強制変更)
        2. git reset --hard (コミットされていない変更の破棄)
        3. git push --force (リモートの履歴書き換え)
        4. git branch -D (ブランチの強制削除)
        5. ファイルやディレクトリの削除

## 3. 作業フロー

*   **Git操作:** `git status` で変更を確認し、必要なファイルだけを明示的に `git add` すること。
    * タスクが与えられたとき、新しくブランチを切って作業を始める
    * ブランチ名は着手日を表す6桁の数字+タスクの内容を簡潔に表す数ワードの英文から小文字のハイフン区切りで作成する
        * 着手日はyymmddで、yyは西暦の下2桁。（例: 2025/10/27 -> 251027）
    * ブランチ名にはタスクの種類によってプリフィックスがつけられる
        1. `feature/` -- 機能開発タスク
        2. `fix/` -- バグ修正タスク
        3. `refactor/` -- リファクタリングタスク
    * ブランチ名の例
        1. feature/251027-else-if-statement-enhancement
        2. fix/251027-oneline-if-statement-parse-error
        3. refactor/251027-parser-code-cleaning
*   **TDDサイクル:**
    *   **TDDサイクル開始前:** npm run lintを実行してerror, warningの数を確認すること
    *   **TDD Refactorフェーズ:** リファクタリングを行う際は、以下のステップを必ず実行すること。
        1. テストが全てパスしていることを確認（Green状態）
        2. リファクタリングを実施
        3. テストが全てパスすることを確認
        4. **`npm run lint` でESLintチェックを実行し、コード品質が維持されていることを確認**
        5. 品質基準を満たしていることを確認してからコミット


## 4. ドキュメントのディレクトリ構造

現在使用中のドキュメントはREADME.mdとAGENTS.md以外すべて `docs/` に配置する。
開発や作業時に作成、参照するドキュメントは以下のようなサブディレクトリに保存する。
ドキュメントのディレクトリ名はタスクごとに作成するブランチ名と同じものとする。

* docs/
    * feature/{タスク名}/ -- 機能開発タスクで使用するドキュメント
    * fix/{タスク名}/ -- バグ修正タスクで使用するドキュメント
    * refactor/{タスク名}/ -- リファクタリングタスクで使用するドキュメント


