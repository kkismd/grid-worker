: Bouncing Ball - 斜め45度に動いてグリッドの端でバウンドするボール
: ボールは輝度255で描画されます

: 初期化
?="Bouncing Ball Started!" /
?="Press any key to quit" /

: ボールの初期位置をランダムに設定（表示エリア20x20の範囲内: 2-17）
X=~
X=X%16
X=X+2

Y=~
Y=Y%16
Y=Y+2

: 速度ベクトルをランダムに設定（斜め4方向のいずれか）
C=~
;=C%2=0
  A=1
#=;
;=C%2=1
  A=-1
#=;

D=~
;=D%2=0
  B=1
#=;
;=D%2=1
  B=-1
#=;

: メインループ
^LOOP

: キーボード入力チェック（何かキーを押すと終了）
K=$
;=K>0 #=-1

: 古い位置を保存
E=X
F=Y

: 次の位置を計算
C=X+A
D=Y+B

: X座標の境界チェックとバウンド（0-19の範囲）
;=C<0
  C=0
  A=1
#=;

;=C>19
  C=19
  A=-1
#=;

: Y座標の境界チェックとバウンド（0-19の範囲）
;=D<0
  D=0
  B=1
#=;

;=D>19
  D=19
  B=-1
#=;

: 新しい位置に移動
X=C
Y=D

: 新しい位置にボールを描画
`=255

: 古い位置をクリア
X=E
Y=F
`=0

: 位置を戻す
X=C
Y=D

#=^LOOP
